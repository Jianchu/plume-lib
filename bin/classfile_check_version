#! /bin/csh -f
# usage <version> <classfile>
# Check that the version of the classfile format is <= the specified version.
# Used to ensure that classfiles are ok for a particular version of
# java.  For example,
#   classfile_check_version 49 MyClass.class
# checks that the classfile will run in a 1.5 JVM (1.6 classfiles are version 50).
# For all class file format version numbers, see
#   http://en.wikipedia.org/wiki/Class_(file_format)

## TODO: perhaps use plume/ClassFileVersion.java instead.

set version = `file $2 | sed -e 's/.*version //' | sed -e 's/[.][0-9]$//'`
if ($version > $1) then
  echo $2 has version $version
  exit -1
else
  exit 0
endif
